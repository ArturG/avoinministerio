#map

#list_of_addresses
  // Creating map
  = javascript_tag do
    var map = L.map('map').setView([#{@users_lat}, #{@users_lon}], 13);
    L.tileLayer('http://{s}.tile.cloudmade.com/6130d5f5e634498686bec4a58962a200/997/256/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>',maxZoom: 25 }).addTo(map);
    $("#map").height(800);
  - @locations.each do |location|
    = javascript_tag do
      // Adding markers by coordinates  
      var lat = #{location.latitude.round(3)};
      var lon = #{location.longitude.round(3)};
      var marker_#{location.id} = L.marker([lat, lon]).addTo(map);
      marker_#{location.id}.bindPopup("<b>#{location.name}</b><br>#{location.address}")
    %br