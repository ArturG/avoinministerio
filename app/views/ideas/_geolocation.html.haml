#map
= request.ip

#new_address
  %h1 Add the new address
  = simple_form_for(@location) do |f|
    = f.error_notification
    = f.text_field :address
    = f.hidden_field :latitude
    = f.hidden_field :longitude
    %br
    = f.button :submit

#list_of_addresses
  %h1 List of addresses
  // Creating map
  = javascript_tag do
    var map = L.map('map').setView([60.1708, 24.9375], 13);
    L.tileLayer('http://{s}.tile.cloudmade.com/6130d5f5e634498686bec4a58962a200/997/256/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>',maxZoom: 25 }).addTo(map);
  - @locations.each do |location|
    = location.address
    = location.latitude.round(3)
    = location.longitude.round(3)
    = javascript_tag do
      // Adding markers by coordinates  
      var lat = #{location.latitude.round(3)};
      var lon = #{location.longitude.round(3)};
      var marker_#{location.id} = L.marker([lat, lon]).addTo(map);
    %br